<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Document</title>
    <link rel="stylesheet" href="./css/reset.css" />
  </head>
  <style>
    .box {
      width: 150px;
      line-height: 40px;
      background-color: hotpink;
      color: #fff;
      text-align: center;
    }
  </style>
  <body>
    <div>
      <span>0</span>: <span>0</span>: <span>0</span>
      <div>价格：￥<span class="price">800</span></div>
      <span class="moment"></span>
    </div>

    <button class="start">开始</button>
    <div class="box"><span>奖品</span></div>

    <script src="./js/jquery-3.3.1.js"></script>
    <!-- <script src="./js/moment.js"></script> -->
    <script src="./js/moment-with-locales.js"></script>
    <script>
      // var date = new Date()
      // date.getFullYear()
      // var month = date.getMonth() +1
      // date.getDate()
      // date.getDay()
      // date.getHours()
      // date.getMinutes()
      // date.getSeconds()
      // date.getMilliseconds()
      // date.getTime()
      // console.log(date.getFullYear())
      // console.log(month)
      // console.log(date.getDate())
      // console.log(date.getDay())
      // console.log(date.getHours())
      // console.log(date.getMinutes())
      // console.log(date.getSeconds())
      // console.log(date.getMilliseconds())
      // console.log(date.getTime())

      //  function time (){
      //    console.log(1)
      //  }

      // var b = setInterval(time,500)
      // $('.stop').click(function(){
      //   clearInterval(b)

      // })
      //  $('.start').click(function () {
      //    clearInterval(b)
      //      b = setInterval(time, 500)

      //   })
      //   function time (){
      //     var date = new Date()
      //     var seconds = date.getSeconds()
      //     var hours = date.getHours()
      //     var minutes = date.getMinutes()
      //      if (hours < 10) {
      //       hours = '0' + hours
      //     }
      //     if (minutes < 10) {
      //       minutes = '0' + minutes
      //     }
      //     if (seconds < 10) {
      //       seconds = '0' + seconds
      //     }
      //     $('span').eq(0).html(`${hours}`)
      //     $('span').eq(1).html(`${minutes}`)
      //     $('span').eq(2).html(`${seconds}`)

      //   }
      //   time()
      // setInterval(time,500)
      function time() {
        var date = new Date()
        var seconds = date.getSeconds()
        var hours = date.getHours()
        var minutes = date.getMinutes()
        var nowAll = hours * 3600 + minutes * 60 + seconds
        var hoursAll = 15 * 3600 + 16 * 60
        var now = hoursAll - nowAll
        var nowHours = Math.floor(now / 3600)
        var nowMinutes = Math.floor((now % 3600) / 60)
        var nowSeconds = Math.floor((now % 3600) % 60)
        if (nowHours < 10) {
          nowHours = '0' + nowHours
        }
        if (nowMinutes < 10) {
          nowMinutes = '0' + nowMinutes
        }
        if (nowSeconds < 10) {
          nowSeconds = '0' + nowSeconds
        }

        $('span')
          .eq(0)
          .html(`${nowHours}`)
        $('span')
          .eq(1)
          .html(`${nowMinutes}`)
        $('span')
          .eq(2)
          .html(`${nowSeconds}`)

        if (hoursAll === nowAll || now < 0) {
          clearInterval(b)
          $('span')
            .eq(0)
            .html(`${'00'}`)
          $('span')
            .eq(1)
            .html(`${'00'}`)
          $('span')
            .eq(2)
            .html(`${'00'}`)
          $('.price').html(`${'600'}`)
        }
      }
      time()
      var b = setInterval(time, 500)
      moment.locale('zh-cn')
      setInterval(function() {
        var time = moment().format('MMMM Do YYYY, h:mm:ss a')
        var time2 = moment('20111031', 'YYYYMMDD').fromNow()
        $('.moment').html(time)
      }, 500)

      var prize = [
        '特等奖 汽车',
        '一等奖 冰箱',
        '二等奖 电视',
        '三等奖 手机',
        '四等奖 水壶',
        '参与奖'
      ]

      var ran = -1
      function num() {
        // ran = Math.floor(Math.random() * prize.length)
        ran = Math.ceil(Math.random() * 10000)
        if (ran === 1) {
          $('.box').text(prize[0])
        } else if (ran > 1 && ran < 10) {
          $('.box').text(prize[1])
        } else if (ran > 10 && ran < 100) {
          $('.box').text(prize[2])
        } else if (ran > 100 && ran < 1000) {
          $('.box').text(prize[3])
        } else if (ran > 1000 && ran < 2000) {
          $('.box').text(prize[4])
        } else if (ran > 2000 && ran < 6000) {
          $('.box').text(prize[5])
        } else {
          $('.box').text(prize[6])
        }
        // var ran2 = prize[ran]
        // $('.box').text(ran2)
      }
      var b
      $('.start').click(function(e) {
        if ($(this).text() === '开始') {
          b = setInterval(num, 100)
          $(this).text('抽奖')
        } else {
          clearInterval(b)
          $(this).attr('disabled', true)
          if (ran === 1) {
            alert(prize[0])
          } else if (ran > 1 && ran < 10) {
            alert(prize[1])
          } else if (ran > 10 && ran < 100) {
            alert(prize[2])
          } else if (ran > 100 && ran < 1000) {
            alert(prize[3])
          } else if (ran > 1000 && ran < 2000) {
            alert(prize[4])
          } else if (ran > 2000 && ran < 6000) {
            alert(prize[5])
          } else {
            alert(prize[6])
          }
          // alert(prize[ran])
        }
      })
    </script>
  </body>
</html>
